# MacWallpaper UI 概览

## 应用结构可视化

```
┌─────────────────────────────────────────────────────────────────┐
│  MacWallpaper 应用                                               │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  ┌──────────────────────────────────────────────────────────┐  │
│  │  状态栏 (Status Bar)                    🖼️ MacWallpaper  │  │
│  │                                              [图标]       │  │
│  └──────────────────────────────────────────────────────────┘  │
│                                                                  │
│  ┌──────────────────────────────────────────────────────────┐  │
│  │  Dock 栏                                                  │  │
│  │  [...] [Safari] [Mail] [📱 MacWallpaper] [...]          │  │
│  │  (可选：可以隐藏 Dock 图标)                               │  │
│  └──────────────────────────────────────────────────────────┘  │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

## 主窗口 UI

```
┌───────────────────────────────────────────────────────────────────┐
│ MacWallpaper                                          [🟢 🟡 🔴] │
├───────────────────────────────────────────────────────────────────┤
│ Toolbar:                                                          │
│  [➕ 添加壁纸]  [🔍 搜索壁纸]            [⚙️ 设置]              │
├───────────────────────────────────────────────────────────────────┤
│                                                                   │
│  壁纸库 (Collection View):                                        │
│                                                                   │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐        │
│  │          │  │          │  │          │  │          │        │
│  │ [缩略图] │  │ [缩略图] │  │ [缩略图] │  │ [缩略图] │        │
│  │          │  │          │  │          │  │          │        │
│  │ 壁纸 1   │  │ 壁纸 2   │  │ 壁纸 3   │  │ 壁纸 4   │        │
│  └──────────┘  └──────────┘  └──────────┘  └──────────┘        │
│                                                                   │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐        │
│  │          │  │          │  │          │  │          │        │
│  │ [缩略图] │  │ [缩略图] │  │ [缩略图] │  │ [缩略图] │        │
│  │          │  │          │  │          │  │          │        │
│  │ 壁纸 5   │  │ 壁纸 6   │  │ 壁纸 7   │  │ 壁纸 8   │        │
│  └──────────┘  └──────────┘  └──────────┘  └──────────┘        │
│                                                                   │
│  (点击任意壁纸立即应用)                                           │
│                                                                   │
└───────────────────────────────────────────────────────────────────┘
```

## 状态栏菜单

```
点击状态栏图标 🖼️ 展开菜单：

┌─────────────────────────────┐
│  打开主窗口                  │
├─────────────────────────────┤
│  ☑️ 静音                    │
├─────────────────────────────┤
│  隐藏 Dock 图标              │
├─────────────────────────────┤
│  关于 MacWallpaper          │
│  退出              ⌘Q       │
└─────────────────────────────┘
```

## 设置面板

```
┌────────────────────────────────┐
│ 设置                [🟢 🟡 🔴]│
├────────────────────────────────┤
│                                │
│  壁纸设置                       │
│                                │
│  ☐ 静音播放                    │
│                                │
│  播放质量:                      │
│  ┌──────────────────────────┐ │
│  │ 高                     ▼ │ │
│  └──────────────────────────┘ │
│    (可选: 低 / 中 / 高 / 原始) │
│                                │
│  ────────────────────────────  │
│                                │
│  ℹ️ 提示: 更改设置后，需要     │
│  重新选择壁纸以应用新设置。     │
│                                │
└────────────────────────────────┘
```

## 壁纸显示层级

```
桌面层级结构（从上到下）：

┌─────────────────────────────────┐
│  应用窗口层                      │  ← 正常应用窗口
│  (Application Windows)          │
├─────────────────────────────────┤
│  桌面图标层                      │  ← 桌面图标和文件
│  (Desktop Icons)                │
├─────────────────────────────────┤
│  🎬 壁纸窗口层                  │  ← MacWallpaper 视频
│  (Wallpaper Video)              │     在这一层播放
├─────────────────────────────────┤
│  桌面背景层                      │  ← 系统桌面图片
│  (System Wallpaper)             │
└─────────────────────────────────┘
```

## 多屏幕支持

```
┌─────────────────┐     ┌─────────────────┐     ┌─────────────────┐
│   显示器 1      │     │   显示器 2      │     │   显示器 3      │
│                 │     │                 │     │                 │
│   🎬 同一视频   │     │   🎬 同一视频   │     │   🎬 同一视频   │
│   全屏播放      │     │   全屏播放      │     │   全屏播放      │
│                 │     │                 │     │                 │
│  (1920x1080)    │     │  (2560x1440)    │     │  (3840x2160)    │
└─────────────────┘     └─────────────────┘     └─────────────────┘

每个显示器都有独立的壁纸窗口，但播放相同的视频内容
视频会自动适配每个显示器的分辨率和宽高比
```

## 用户交互流程

### 1. 添加壁纸流程

```
[点击"添加壁纸"]
        │
        ▼
┌────────────────────┐
│  文件选择器         │
│  ┌──────────────┐  │
│  │ 选择 MP4 文件│  │
│  │ (支持多选)   │  │
│  └──────────────┘  │
│  [取消]   [打开]   │
└────────────────────┘
        │
        ▼
  添加到壁纸库
        │
        ▼
  生成视频缩略图
        │
        ▼
  显示在网格视图
```

### 2. 应用壁纸流程

```
[点击壁纸缩略图]
        │
        ▼
   壁纸引擎启动
        │
        ├─→ 屏幕 1: 创建壁纸窗口
        │          加载视频
        │          开始播放
        │
        ├─→ 屏幕 2: 创建壁纸窗口
        │          加载视频
        │          开始播放
        │
        └─→ 屏幕 N: 创建壁纸窗口
                   加载视频
                   开始播放
        │
        ▼
  显示"壁纸已应用"通知
```

### 3. 搜索壁纸流程

```
[点击"搜索壁纸"]
        │
        ▼
┌────────────────────┐
│  搜索对话框         │
│  ┌──────────────┐  │
│  │ 输入关键词或 │  │
│  │ URL 地址     │  │
│  └──────────────┘  │
│  [取消]   [打开]   │
└────────────────────┘
        │
        ├─→ 如果是 URL: 在浏览器中打开
        │
        └─→ 如果是关键词: Google 搜索 "关键词 wallpaper mp4"
        │
        ▼
   用户下载壁纸
        │
        ▼
   使用"添加壁纸"功能导入
```

## 应用状态

```
┌─────────────────────────────────────────────┐
│  应用状态机                                  │
├─────────────────────────────────────────────┤
│                                             │
│   [启动]                                     │
│      │                                       │
│      ▼                                       │
│   [初始化] → 创建状态栏图标                  │
│      │       创建主窗口                       │
│      │       创建壁纸引擎                     │
│      ▼                                       │
│   [空闲] ⟷ [播放壁纸]                       │
│      ▲          │                            │
│      │          ▼                            │
│      └─── [停止播放]                         │
│                                             │
│   [关闭主窗口] → 应用继续运行（后台）        │
│                                             │
│   [退出] → 停止播放 → 清理资源 → 终止        │
│                                             │
└─────────────────────────────────────────────┘
```

## 关键功能总结

### ✅ 已实现的功能

1. **✨ 核心功能**
   - ✅ MP4 视频播放
   - ✅ 多屏幕支持
   - ✅ 自动循环播放
   - ✅ 壁纸库管理

2. **🎨 用户界面**
   - ✅ 主窗口（网格视图）
   - ✅ 工具栏（添加、搜索、设置）
   - ✅ 状态栏菜单
   - ✅ 设置面板

3. **⚙️ 配置选项**
   - ✅ 静音切换
   - ✅ 视频质量选择
   - ✅ Dock 图标隐藏/显示

4. **🔧 高级功能**
   - ✅ 视频缩略图生成
   - ✅ 壁纸持久化存储
   - ✅ 屏幕配置变化检测
   - ✅ 在线搜索集成

### 🚀 未来可能的增强

1. **单个壁纸操作**
   - 删除壁纸
   - 重命名壁纸
   - 收藏/标签系统

2. **播放控制**
   - 暂停/恢复
   - 播放速度调整
   - 播放列表（按时间切换）

3. **效果增强**
   - 滤镜效果
   - 亮度调整
   - 对比度调整

4. **性能优化**
   - 缓存机制
   - 低功耗模式
   - 电池使用监控

5. **社区功能**
   - 内置壁纸商店
   - 分享壁纸链接
   - 用户评分系统

---

**注意**: 这是基于当前实现的 UI 概览。实际运行效果可能会有差异。
