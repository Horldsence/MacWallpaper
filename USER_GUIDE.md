# 使用指南

## 目录
1. [安装](#安装)
2. [首次运行](#首次运行)
3. [添加壁纸](#添加壁纸)
4. [应用壁纸](#应用壁纸)
5. [配置设置](#配置设置)
6. [状态栏功能](#状态栏功能)
7. [常见问题](#常见问题)

## 安装

### 方式一：从源码构建

1. 确保你的 Mac 运行 macOS 12.0 或更高版本
2. 安装 Xcode 或 Swift 工具链
3. 克隆仓库：
   ```bash
   git clone https://github.com/Horldsence/MacWallpaper.git
   cd MacWallpaper
   ```
4. 构建应用：
   ```bash
   ./build.sh
   ```
5. 运行应用：
   ```bash
   .build/release/MacWallpaper
   ```

### 方式二：使用 Xcode

1. 生成 Xcode 项目：
   ```bash
   swift package generate-xcodeproj
   ```
2. 在 Xcode 中打开 `MacWallpaper.xcodeproj`
3. 点击运行按钮（⌘R）

## 首次运行

当你首次运行 MacWallpaper 时，会看到：

1. **主窗口**：显示壁纸库（初始为空）
2. **状态栏图标**：右上角会出现 MacWallpaper 图标
3. **工具栏**：包含三个主要按钮
   - ➕ 添加壁纸
   - 🔍 搜索壁纸
   - ⚙️ 设置

## 添加壁纸

### 方法一：从本地文件添加

1. 点击工具栏的 **"添加壁纸"** 按钮
2. 在文件选择器中，导航到你的 MP4 视频文件位置
3. 选择一个或多个 MP4 文件（支持多选）
4. 点击 **"打开"**

壁纸会立即出现在主窗口的网格视图中。

**支持的格式**：
- MP4 (推荐)
- 其他 QuickTime 支持的视频格式

**建议**：
- 视频分辨率应匹配或高于你的屏幕分辨率
- 避免使用过大的文件（推荐小于 500MB）
- 循环视频效果更佳

### 方法二：在线搜索

1. 点击工具栏的 **"搜索壁纸"** 按钮
2. 在对话框中输入：
   - **搜索关键词**：如 "自然风景"、"科幻"等
   - **直接 URL**：壁纸网站地址
3. 点击 **"打开"**
4. 浏览器会打开搜索结果或指定网站
5. 下载喜欢的 MP4 壁纸
6. 使用方法一添加到库中

## 应用壁纸

### 快速应用

1. 在主窗口的网格视图中浏览壁纸
2. 点击任意壁纸的缩略图
3. 壁纸会立即应用到所有桌面和屏幕
4. 会显示一个通知："壁纸已应用"

### 效果

- 壁纸会在所有连接的显示器上播放
- 视频会自动循环播放
- 壁纸位于桌面图标下方，不影响正常使用
- 壁纸会出现在所有 Mission Control 空间中

## 配置设置

点击工具栏的 **"设置"** 按钮打开设置面板：

### 静音播放

- ☑️ 勾选 **"静音播放"** 关闭壁纸音频
- ☐ 取消勾选恢复音频播放

**注意**：设置会立即应用到当前正在播放的壁纸。

### 播放质量

从下拉菜单选择质量级别：

- **低**：节省 CPU 和电池，适合性能较弱的设备
- **中**：平衡性能和质量
- **高**：高质量播放（推荐）
- **原始**：原始视频质量，最佳视觉效果

**提示**：更改质量后，需要重新选择壁纸以应用新设置。

## 状态栏功能

点击状态栏的 MacWallpaper 图标（右上角）访问快捷菜单：

### 菜单选项

1. **打开主窗口**
   - 显示/激活主窗口
   - 快捷键：点击状态栏图标

2. **静音**
   - 切换壁纸音频开/关
   - 勾选标记表示已静音

3. **隐藏 Dock 图标**
   - 隐藏：应用仅在状态栏显示
   - 显示：应用同时在 Dock 和状态栏显示
   - 可随时切换

4. **关于 MacWallpaper**
   - 查看应用信息、版本等

5. **退出**
   - 完全退出应用
   - 快捷键：⌘Q

## 高级功能

### 多屏幕支持

MacWallpaper 自动支持多显示器：

- 同一壁纸会同时应用到所有屏幕
- 每个屏幕都会全屏显示
- 支持不同分辨率和宽高比
- 连接/断开显示器会自动调整

### Mission Control 集成

- 壁纸会出现在所有虚拟桌面（Spaces）
- 切换 Space 时壁纸保持播放
- 不占用窗口切换器

### 壁纸管理

**删除壁纸**：
目前需要手动管理壁纸文件。应用只存储文件路径引用。

**持久化存储**：
壁纸库信息保存在系统 UserDefaults 中，下次启动时自动加载。

## 常见问题

### Q: 壁纸不播放/黑屏？

**A**: 检查以下几点：
1. 确认 MP4 文件未损坏，可在其他播放器中正常播放
2. 检查文件路径是否仍然有效
3. 尝试重新添加壁纸
4. 重启应用

### Q: 性能/发热问题？

**A**: 尝试以下方法：
1. 降低播放质量（设置 → 播放质量 → 低或中）
2. 选择分辨率较低的视频文件
3. 选择帧率较低的视频（30fps 而非 60fps）
4. 确保视频编码为 H.264（兼容性最好）

### Q: 音频不同步？

**A**: 
1. 动态壁纸通常建议静音使用
2. 勾选 "静音播放" 选项
3. 如需音频，确保视频文件音视频同步正常

### Q: 如何开机自启动？

**A**: 
1. 打开 **系统设置** → **常规** → **登录项**
2. 点击 **+** 添加 MacWallpaper 应用
3. 勾选 **"在后台打开"**（如果希望启动时隐藏主窗口）

### Q: 壁纸遮挡桌面图标？

**A**: 
正常情况下不会。如果出现此问题：
1. 确认应用版本是最新的
2. 重启应用
3. 如问题持续，请提交 issue

### Q: 支持其他视频格式吗？

**A**: 
主要支持 MP4。其他格式如 MOV 理论上也支持，但未经充分测试。推荐使用 H.264 编码的 MP4 文件。

### Q: 可以设置不同屏幕显示不同壁纸吗？

**A**: 
当前版本所有屏幕显示相同壁纸。未来版本可能会添加此功能。

### Q: 如何贡献代码？

**A**: 
请参阅 [CONTRIBUTING.md](CONTRIBUTING.md) 文件。

## 键盘快捷键

- **⌘Q**: 退出应用
- **⌘W**: 关闭主窗口（应用继续在后台运行）

## 技巧和最佳实践

### 壁纸制作建议

1. **分辨率**：匹配你的屏幕（如 1920x1080、2560x1440、3840x2160）
2. **时长**：10-30 秒循环效果较好
3. **过渡**：首尾帧相似可实现无缝循环
4. **文件大小**：推荐 50-200MB
5. **编码**：H.264，码率 5-10 Mbps

### 推荐壁纸来源

- **免费资源**：
  - Pexels Videos
  - Pixabay
  - Coverr
  
- **搜索关键词**：
  - "4K living wallpaper"
  - "seamless loop video"
  - "cinemagraph"

### 性能优化

- 使用 SSD 存储壁纸文件
- 关闭不需要的动画效果
- 使用较低质量设置延长电池续航

## 反馈和支持

- **GitHub Issues**: [提交问题](https://github.com/Horldsence/MacWallpaper/issues)
- **功能请求**: 使用 GitHub Discussions
- **安全问题**: 请私下联系维护者

## 更新日志

查看 [CHANGELOG.md](CHANGELOG.md)（如有）了解版本历史。

---

**享受你的动态桌面体验！** 🎬✨
